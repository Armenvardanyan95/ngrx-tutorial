"use strict";(self.webpackChunkngrx_course=self.webpackChunkngrx_course||[]).push([[999],{4331:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return p},default:function(){return g}});var n=a(7462),o=a(3366),i=(a(7294),a(3905)),r=["components"],s={title:"Chapter 5: Actions",sidebar_position:5},c=void 0,l={unversionedId:"chapter-5",id:"chapter-5",isDocsHomePage:!1,title:"Chapter 5: Actions",description:"What are Actions?",source:"@site/docs/chapter-5.mdx",sourceDirName:".",slug:"/chapter-5",permalink:"/ngrx-essentials-course/docs/chapter-5",editUrl:"https://github.com/this-is-angular/ngrx-essentials-course/edit/main/docs/chapter-5.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Chapter 5: Actions",sidebar_position:5},sidebar:"courseSidebar",previous:{title:"Chapter 4: NgRx: The Why",permalink:"/ngrx-essentials-course/docs/chapter-4"},next:{title:"Chapter 6: Reducers",permalink:"/ngrx-essentials-course/docs/chapter-6"}},p=[{value:"What are Actions?",id:"what-are-actions",children:[]},{value:"What does an Action look like?",id:"what-does-an-action-look-like",children:[{value:"Creating an action",id:"creating-an-action",children:[]}]},{value:"Homework",id:"homework",children:[]}],d={toc:p};function g(e){var t=e.components,a=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"what-are-actions"},"What are Actions?"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Actions"),' are the most simple core concept of NgRx (and Redux in general). Action is a unique event that is used to trigger a change in the state. What does it mean? For example, we might have an action that says "Home page has been loaded". It might mean some changes in the state. For example, in our application, it might trigger an API call for lists of expenses and incomes, which will in turn trigger an event that puts that data in the ',(0,i.kt)("inlineCode",{parentName:"p"},"Store"),', resulting in a change in the UI. Or we might have an action that says "Add a category", which will create a new category of income/expense in the ',(0,i.kt)("inlineCode",{parentName:"p"},"Store"),", again resulting in a UI change. Again, essentially ",(0,i.kt)("inlineCode",{parentName:"p"},"Actions")," are like commands to the ",(0,i.kt)("inlineCode",{parentName:"p"},"Store"),", or methods that allow to update its contents."),(0,i.kt)("h2",{id:"what-does-an-action-look-like"},"What does an Action look like?"),(0,i.kt)("p",null,"Actions are simple. An action is usually an object with just two properties: a ",(0,i.kt)("inlineCode",{parentName:"p"},"type"),", a string that indicates what ",(0,i.kt)("em",{parentName:"p"},"exactly")," that action represents, and an optional ",(0,i.kt)("inlineCode",{parentName:"p"},"payload")," that is kind of like a function argument. In our example, an action that adds a category might look like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},'const addCategoryAction = {\n  type: "[Categories List] Add Category",\n  payload: { name: "Food" },\n};\n')),(0,i.kt)("p",null,"This is an action that adds a category named ",(0,i.kt)("inlineCode",{parentName:"p"},"Food")," to the list of all categories. Of course, we still haven't written the logic that actually uses this action to put the data in the store, but for now we are focusing on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Actions"),"."),(0,i.kt)("h3",{id:"creating-an-action"},"Creating an action"),(0,i.kt)("p",null,"NgRx provides some utility functions to help us create actions instead of creating our objects by hand as we did in the previous example."),(0,i.kt)("p",null,"To start learning about those, let's create a folder names ",(0,i.kt)("inlineCode",{parentName:"p"},"state")," in the ",(0,i.kt)("inlineCode",{parentName:"p"},"src/app")," directory, and a file called ",(0,i.kt)("inlineCode",{parentName:"p"},"actions.ts")," inside it."),(0,i.kt)("h4",{id:"using-createaction"},"Using ",(0,i.kt)("inlineCode",{parentName:"h4"},"createAction")),(0,i.kt)("p",null,"The first way of doing so is by using ",(0,i.kt)("inlineCode",{parentName:"p"},"createAction")," which will create a single action given the name and the parameters provided:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="state/actions.ts"',title:'"state/actions.ts"'},'import { createAction, props } from "@ngrx/store";\nimport { Category } from "./state";\n\nexport const addCategory = createAction(\n  "[Category List] Add Category",\n  props<{ category: Category }>()\n);\n')),(0,i.kt)("p",null,"Let's break down this example. First of all, the name ",(0,i.kt)("inlineCode",{parentName:"p"},"createAction")," is a bit deceptive; it does not create an action; in fact, it creates a function which, when called, wil produce an action object. The first argument is the ",(0,i.kt)("inlineCode",{parentName:"p"},"type")," of the action that will be produced. When called, the ",(0,i.kt)("inlineCode",{parentName:"p"},"addCategory")," function will ",(0,i.kt)("strong",{parentName:"p"},"always"),' create an action with type "',"[Category List]",' Create Category". The second argument uses the bizarre function ',(0,i.kt)("inlineCode",{parentName:"p"},"props"),", which is a generic function that allows us to define the type of the ",(0,i.kt)("inlineCode",{parentName:"p"},"payload")," which the created action will have. Essentially, it explains that in order to create the action using the ",(0,i.kt)("inlineCode",{parentName:"p"},"addCategory")," function, we should call it and provide an object that has a property ",(0,i.kt)("inlineCode",{parentName:"p"},"category")," which is defined in the Interface Category defined in the AppState. Let's do this and ",(0,i.kt)("inlineCode",{parentName:"p"},"console.log")," the result."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="app.component.ts"',title:'"app.component.ts"'},'import { Component, OnInit } from "@angular/core";\nimport { addCategory } from "./state/actions";\n\n@Component({/* ... */})\nexport class AppComponent implements OnInit {\n  ngOnInit() {\n    console.log(addCategory({category:{ name: "Food" }}));\n  }\n}\n')),(0,i.kt)("p",null,"In the console, we will see the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'{\n  type: "[Category List] Add Category",\n  category: { name: "Food" }\n}\n')),(0,i.kt)("p",null,"So essentially, ",(0,i.kt)("inlineCode",{parentName:"p"},"createAction")," provided us with an easy way of creating a single action. ",(0,i.kt)("inlineCode",{parentName:"p"},"addCategory")," in our case is an ",(0,i.kt)("inlineCode",{parentName:"p"},"ActionCreator"),", a function which produces an action object whenever called, and ",(0,i.kt)("inlineCode",{parentName:"p"},"props")," explained what argument that ",(0,i.kt)("inlineCode",{parentName:"p"},"ActionCreator")," function expects."),(0,i.kt)("h4",{id:"using-createactiongroup"},"Using ",(0,i.kt)("inlineCode",{parentName:"h4"},"createActionGroup")),(0,i.kt)("p",null,"As we just saw, creating an action is pretty straightforward."),(0,i.kt)("p",null,"However, when dealing with multiple actions, this can lead to a more verbose code and prone to typos:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="state/actions.ts"',title:'"state/actions.ts"'},'export const addCategory = createAction(\n  "[Category List] Add Category",\n  props<{ category: Category }>()\n);\n\nexport const addAnotherCategory = createAction(\n  //  \ud83d\udc47 Did you notice the typo?\n  "[Catgory List] Add Another Category",\n  props<{ category: Category }>()\n);\n')),(0,i.kt)("p",null,"With those issues in mind, NgRx published a new function that allows us to create multiple actions at one: the ",(0,i.kt)("inlineCode",{parentName:"p"},"createActionGroup")," function."),(0,i.kt)("p",null,"Its usage is fairly simple and is based on two parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The source of the action, in our case ",(0,i.kt)("inlineCode",{parentName:"li"},"Category List")),(0,i.kt)("li",{parentName:"ul"},"A series of properties symbolizing our actions and their parameters")),(0,i.kt)("p",null,"Let's go back to the previous example to see what is changing:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="state/actions.ts"',title:'"state/actions.ts"'},"export const categoryActions = createActionGroup({\n  source: 'Category List',\n  events: {\n    'Add Category': props<{ category: Category }>(),\n    'Add Another Category': props<{ category: Category }>(),\n  }\n})\n")),(0,i.kt)("p",null,"By doing so, all our related actions will be grouped together and we still can create them by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},"categoryActions")," variable that automatically generates you the code to create them:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"categoryActions.addCategory({ category: 'Food' });\ncategoryActions.addAnotherCategory({ category: 'Food' });\n")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Notice that our action types like ",(0,i.kt)("inlineCode",{parentName:"p"},"Add Category")," written in plain English are converted to ",(0,i.kt)("inlineCode",{parentName:"p"},"addCategory")," - a camel case variable name. This magic is done using ",(0,i.kt)("a",{parentName:"p",href:"https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html"},"TypeScript's template literal types")," and the ",(0,i.kt)("a",{parentName:"p",href:"https://www.typescriptlang.org/docs/handbook/2/mapped-types.html#handbook-content"},"mapped types"),". ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ngrx/platform/blob/master/modules/store/src/action_group_creator_models.ts"},"The source code for this")," is pretty fascinating, if you're a TypeScript enthusiast, I strongly recommend checking it out or listen to. You can also listen to ",(0,i.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=V6eHIvwDFP4"},'Brandon Robert\'s video about the "TypeScript magic" behind the scenes'),"."))),(0,i.kt)("h2",{id:"homework"},"Homework"),(0,i.kt)("p",null,"Yes, you've read it correctly: we have learned how to write some basic code in NgRx, so it is time for some homework!"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"We ",(0,i.kt)("strong",{parentName:"p"},"strongly")," recommand you not to move on to the next chapter without adding the homework code as we will be using that code in the next chapters"))),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Create an action for deleting a category"),"\nIt should receive a string with the name of the category, and in the next chapter we will use that code to write the actual logic for deleting the category."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Create an action for updating a category"),"\nIt must receive a ",(0,i.kt)("inlineCode",{parentName:"li"},"Category")," object (",(0,i.kt)("inlineCode",{parentName:"li"},"{name: string}"),"), and again, we will write the code to update the category in the next chapter")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"For this homework, assume categories cannot have duplicate names. We will deal with this problem later.")),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"You will find solution code for all the homeworks at the end of the chapters"))),(0,i.kt)("p",null,"In this chapter, we learned how to create ",(0,i.kt)("inlineCode",{parentName:"p"},"Actions"),", unique events that specify what should happen to the state. In the next one, we will be writing code that actually does the transformation in the state."),(0,i.kt)("hr",null),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Exercise 1 solution"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Using ",(0,i.kt)("inlineCode",{parentName:"strong"},"createActionGroup"),":")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'{5} title="state/actions.ts"',"{5}":!0,title:'"state/actions.ts"'},"export const categoryActions = createActionGroup({\n  source: 'Category List',\n  events: {\n    'Add Category': props<{ category: Category }>(),\n    'Delete Category': props<{ category: Category }>(),\n  }\n})\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Using ",(0,i.kt)("inlineCode",{parentName:"strong"},"createAction"),":")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'{6-9} title="state/actions.ts"',"{6-9}":!0,title:'"state/actions.ts"'},'export const addCategory = createAction(\n  "[Category List] Add Category",\n  props<{ category: Category }>()\n);\n\nexport const deleteCategory = createAction(\n  "[Category List] Delete Category",\n  props<{name: string}>()\n);\n'))),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Exercise 2 solution"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Using ",(0,i.kt)("inlineCode",{parentName:"strong"},"createActionGroup"),":")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'{6} title="state/actions.ts"',"{6}":!0,title:'"state/actions.ts"'},"export const categoryActions = createActionGroup({\n  source: 'Category List',\n  events: {\n    'Add Category': props<{ category: Category }>(),\n    'Delete Category': props<{ category: Category }>(),\n    'Update Category': props<{ category: Category }>(),\n  }\n})\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Using ",(0,i.kt)("inlineCode",{parentName:"strong"},"createAction"),":")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:'{11-14} title="state/actions.ts"',"{11-14}":!0,title:'"state/actions.ts"'},'export const addCategory = createAction(\n  "[Category List] Add Category",\n  props<{ category: Category }>()\n);\n\nexport const deleteCategory = createAction(\n  "[Category List] Delete Category",\n  props<{name: string}>()\n);\n\nexport const updateCategory = createAction(\n  "[Category List] Update Category",\n  props<{ name: string }>()\n);\n\n'))))}g.isMDXComponent=!0}}]);